# name: 🚀 Deploy PHP Sockets App

# on:
#     push:
#         branches:
#             - main

# jobs:
#     deploy:
#         name: Deploy to Server
#         runs-on: ubuntu-latest

#         steps:
#             - name: 📥 Checkout repository
#               uses: actions/checkout@v3

#             - name: 🛡️ Set up SSH key
#               run: |
#                   mkdir -p ~/.ssh
#                   echo "${{ secrets.SSH_PRIVATE_KEY }}" > ~/.ssh/id_ed25519
#                   chmod 600 ~/.ssh/id_ed25519
#                   ssh-keyscan -H 20.169.153.179 >> ~/.ssh/known_hosts

#             - name: 🚀 Deploy project via rsync
#               run: |
#                   rsync -avz --delete \
#                     --exclude=".env" \
#                     --exclude=".git" \
#                     --exclude="node_modules" \
#                     --exclude="vendor" \
#                     ./ ludo@20.169.153.179:/var/opt/sockets

#             - name: 🧩 Install dependencies & restart supervisor
#               run: |
#                   ssh ludo@20.169.153.179 << 'EOF'
#                     cd /var/opt/sockets
#                     composer install --no-dev --optimize-autoloader
#                     sudo supervisorctl restart gamesocket
#                   EOF
